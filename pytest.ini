[pytest]
# Explicit allow-list for plugins (pytest ≥ 7 removed the old
# ``plugins =`` ini option).  We load only the two we need:
#   * pytest_asyncio  – async-test support
#   * pytest_env      – ``env =`` ini option used below
addopts          = -p pytest_asyncio -p pytest_env --import-mode=importlib -ra -q

testpaths        = packages services tests
filterwarnings   = ignore::DeprecationWarning

markers =
    gateway:  Gateway layer (hits live Memory-API over HTTP)
    integ:    Requires Docker compose services (Redis, Arango, MinIO)
    golden:   Early golden-snapshot checks (allowed to xfail until M-6)

env =
    PYTEST_DISABLE_PLUGIN_AUTOLOAD=1
